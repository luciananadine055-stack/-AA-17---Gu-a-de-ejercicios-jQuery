<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evento blur en jQuery - Validaci√≥n de campo vac√≠o</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 700px;
            margin: 0 auto;
            padding: 40px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background-color: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }
        
        .subtitle {
            color: #7f8c8d;
            text-align: center;
            margin-bottom: 30px;
            font-style: italic;
        }
        
        .form-container {
            max-width: 500px;
            margin: 0 auto 30px auto;
        }
        
        .campo-grupo {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 16px;
        }
        
        .campo-texto {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            border: 3px solid #bdc3c7;
            border-radius: 10px;
            background-color: #f8f9fa;
            transition: all 0.3s ease;
            color: #2c3e50;
        }
        
        .campo-texto:focus {
            outline: none;
            border-color: #3498db;
            background-color: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .campo-texto::placeholder {
            color: #95a5a6;
            font-style: italic;
        }
        
        .campo-valido {
            border-color: #2ecc71 !important;
            background-color: #f0fff4 !important;
        }
        
        .campo-invalido {
            border-color: #e74c3c !important;
            background-color: #fff5f5 !important;
        }
        
        .mensaje-validacion {
            margin-top: 8px;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 14px;
            display: none;
        }
        
        .mensaje-error {
            background-color: #fed7d7;
            color: #c53030;
            border-left: 4px solid #e53e3e;
        }
        
        .mensaje-exito {
            background-color: #c6f6d5;
            color: #276749;
            border-left: 4px solid #38a169;
        }
        
        .info-panel {
            background-color: #e8f4fc;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .estado-campo {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .estado-item {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            min-width: 120px;
            text-align: center;
        }
        
        .estado-item h3 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 14px;
            text-transform: uppercase;
        }
        
        .estado-item .valor {
            font-size: 16px;
            font-weight: bold;
        }
        
        .estado-valido {
            color: #2ecc71;
        }
        
        .estado-invalido {
            color: #e74c3c;
        }
        
        .estadisticas {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .estadistica-card {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            min-width: 100px;
            text-align: center;
        }
        
        .estadistica-card h3 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 12px;
            text-transform: uppercase;
        }
        
        .estadistica-card .numero {
            font-size: 20px;
            font-weight: bold;
            color: #3498db;
        }
        
        .codigo-ejemplo {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            text-align: left;
            overflow-x: auto;
        }
        
        .instrucciones {
            background-color: #fff3cd;
            border: 2px dashed #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .historial-eventos {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            max-height: 150px;
            overflow-y: auto;
            text-align: left;
        }
        
        .evento-item {
            padding: 5px 10px;
            margin: 5px 0;
            border-left: 4px solid #3498db;
            background: white;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .evento-blur {
            border-left-color: #3498db;
        }
        
        .evento-valido {
            border-left-color: #2ecc71;
            background-color: #f0fff4;
        }
        
        .evento-invalido {
            border-left-color: #e74c3c;
            background-color: #fed7d7;
        }
        
        .ejemplo-uso {
            background-color: #edf2f7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4a5568;
        }
        
        .boton-ejemplo {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .boton-ejemplo:hover {
            background: linear-gradient(135deg, #2980b9, #2471a3);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Evento blur en jQuery</h1>
        <p class="subtitle">Validaci√≥n de campo vac√≠o al perder el foco</p>
        
        <div class="instrucciones">
            <h3>üéØ Instrucciones:</h3>
            <p>Escribe algo en el campo de texto y luego haz clic fuera del campo (o presiona Tab) para que pierda el foco.</p>
            <p>Si el campo est√° <strong>vac√≠o</strong>, se mostrar√° una alerta y el campo se marcar√° en rojo.</p>
            <p>Si el campo tiene <strong>contenido</strong>, se mostrar√° un mensaje de √©xito.</p>
        </div>
        
        <div class="form-container">
            <div class="campo-grupo">
                <label for="campoTexto">Ingresa tu informaci√≥n:</label>
                <input type="text" 
                       id="campoTexto" 
                       class="campo-texto" 
                       placeholder="Escribe algo aqu√≠...">
                <div class="mensaje-validacion mensaje-error" id="mensajeError">
                    ‚ùå El campo no puede estar vac√≠o
                </div>
                <div class="mensaje-validacion mensaje-exito" id="mensajeExito">
                    ‚úÖ Campo v√°lido - ¬°Gracias por completar la informaci√≥n!
                </div>
            </div>
        </div>
        
        <div class="info-panel">
            <h3>üìä Estado del Campo:</h3>
            <div class="estado-campo">
                <div class="estado-item">
                    <h3>Estado Actual</h3>
                    <div class="valor" id="estadoActual">SIN VALIDAR</div>
                </div>
                <div class="estado-item">
                    <h3>Longitud</h3>
                    <div class="valor" id="longitudTexto">0</div>
                </div>
                <div class="estado-item">
                    <h3>√öltima Validaci√≥n</h3>
                    <div class="valor" id="ultimaValidacion">-</div>
                </div>
            </div>
        </div>
        
        <div class="estadisticas">
            <div class="estadistica-card">
                <h3>Validaciones</h3>
                <div class="numero" id="contadorValidaciones">0</div>
            </div>
            <div class="estadistica-card">
                <h3>V√°lidas</h3>
                <div class="numero" id="contadorValidas">0</div>
            </div>
            <div class="estadistica-card">
                <h3>Inv√°lidas</h3>
                <div class="numero" id="contadorInvalidas">0</div>
            </div>
        </div>
        
        <div class="historial-eventos">
            <h4>üìù Historial de Validaciones:</h4>
            <div id="listaEventos">
                <div class="evento-item">Esperando validaciones...</div>
            </div>
        </div>
        
        <div class="ejemplo-uso">
            <h4>üîç Prueba estos casos:</h4>
            <button class="boton-ejemplo" onclick="probarCaso('')">Probar campo vac√≠o</button>
            <button class="boton-ejemplo" onclick="probarCaso('Texto de prueba')">Probar con texto</button>
            <button class="boton-ejemplo" onclick="limpiarCampo()">Limpiar campo</button>
        </div>
        
        <div class="codigo-ejemplo">
            <h4>üîß C√≥digo jQuery - Evento blur y m√©todo val():</h4>
            <pre>
// Funci√≥n principal que se ejecuta al perder el foco
function validarCampoVacio() {
    // Obtener el valor del campo usando val()
    let cadena = $(this).val();
    
    // Verificar si la cadena est√° vac√≠a
    if (cadena.length == 0) {
        // Campo vac√≠o - mostrar alerta
        alert("No ingres√≥ datos");
        
        // Marcar campo como inv√°lido
        $(this).removeClass('campo-valido').addClass('campo-invalido');
        $('#mensajeError').show();
        $('#mensajeExito').hide();
        
        // Actualizar interfaz
        $('#estadoActual').text('INV√ÅLIDO').addClass('estado-invalido');
        contadorInvalidas++;
        
    } else {
        // Campo con contenido - marcar como v√°lido
        $(this).removeClass('campo-invalido').addClass('campo-valido');
        $('#mensajeError').hide();
        $('#mensajeExito').show();
        
        // Actualizar interfaz
        $('#estadoActual').text('V√ÅLIDO').addClass('estado-valido');
        contadorValidas++;
    }
    
    // Actualizar estad√≠sticas
    $('#longitudTexto').text(cadena.length);
    contadorValidaciones++;
}

// Asignar el evento blur al campo
$('#campoTexto').blur(validarCampoVacio);
            </pre>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            let contadorValidaciones = 0;
            let contadorValidas = 0;
            let contadorInvalidas = 0;
            
            // Funci√≥n para registrar eventos en el historial
            function registrarEvento(mensaje, esValido) {
                const timestamp = new Date().toLocaleTimeString();
                const eventoClass = esValido ? 'evento-valido' : 'evento-invalido';
                
                $('#listaEventos').prepend(
                    `<div class="evento-item ${eventoClass}">[${timestamp}] ${mensaje}</div>`
                );
                
                // Actualizar √∫ltima validaci√≥n
                $('#ultimaValidacion').text(timestamp);
                
                // Limitar a 8 eventos en el historial
                if ($('#listaEventos .evento-item').length > 8) {
                    $('#listaEventos .evento-item:last').remove();
                }
            }
            
            // Funci√≥n principal que se ejecuta al perder el foco
            function validarCampoVacio() {
                // Obtener el valor del campo usando val()
                let cadena = $(this).val();
                let campoVacio = cadena.length == 0;
                
                // Verificar si la cadena est√° vac√≠a
                if (campoVacio) {
                    // Campo vac√≠o - mostrar alerta
                    alert("‚ö†Ô∏è No ingres√≥ datos\n\nPor favor, completa el campo antes de continuar.");
                    
                    // Marcar campo como inv√°lido
                    $(this).removeClass('campo-valido').addClass('campo-invalido');
                    $('#mensajeError').show();
                    $('#mensajeExito').hide();
                    
                    // Actualizar interfaz
                    $('#estadoActual').text('INV√ÅLIDO').removeClass('estado-valido').addClass('estado-invalido');
                    contadorInvalidas++;
                    $('#contadorInvalidas').text(contadorInvalidas);
                    
                    // Registrar evento
                    registrarEvento('Validaci√≥n: Campo VAC√çO - Alerta mostrada', false);
                    
                } else {
                    // Campo con contenido - marcar como v√°lido
                    $(this).removeClass('campo-invalido').addClass('campo-valido');
                    $('#mensajeError').hide();
                    $('#mensajeExito').show();
                    
                    // Actualizar interfaz
                    $('#estadoActual').text('V√ÅLIDO').removeClass('estado-invalido').addClass('estado-valido');
                    contadorValidas++;
                    $('#contadorValidas').text(contadorValidas);
                    
                    // Registrar evento
                    registrarEvento(`Validaci√≥n: Campo V√ÅLIDO - "${cadena}"`, true);
                }
                
                // Actualizar estad√≠sticas generales
                $('#longitudTexto').text(cadena.length);
                contadorValidaciones++;
                $('#contadorValidaciones').text(contadorValidaciones);
            }
            
            // Asignar el evento blur al campo
            $('#campoTexto').blur(validarCampoVacio);
            
            // Tambi√©n validar cuando se presiona Enter
            $('#campoTexto').keypress(function(e) {
                if (e.which == 13) { // Tecla Enter
                    $(this).blur();
                }
            });
            
            // Funci√≥n para probar casos espec√≠ficos (usada por los botones de ejemplo)
            window.probarCaso = function(texto) {
                $('#campoTexto').val(texto).blur();
            };
            
            // Funci√≥n para limpiar el campo
            window.limpiarCampo = function() {
                $('#campoTexto').val('').focus();
                $('#mensajeError').hide();
                $('#mensajeExito').hide();
                $(this).removeClass('campo-valido campo-invalido');
                $('#estadoActual').text('SIN VALIDAR').removeClass('estado-valido estado-invalido');
                $('#longitudTexto').text('0');
            };
            
            // Efecto adicional: mostrar longitud en tiempo real
            $('#campoTexto').on('input', function() {
                $('#longitudTexto').text($(this).val().length);
            });
            
            // Limpiar mensaje inicial del historial despu√©s del primer evento
            setTimeout(function() {
                if ($('#listaEventos .evento-item').length === 1 && 
                    $('#listaEventos .evento-item').text().includes('Esperando')) {
                    $('#listaEventos').empty();
                }
            }, 100);
        });
    </script>
</body>
</html>
